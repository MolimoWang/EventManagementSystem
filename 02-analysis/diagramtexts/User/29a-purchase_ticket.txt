title User Purchase Ticket Sequence Diagram

actor User
boundary TicketSystem
control TicketService
entity TicketInfo
entity Ticket
entity Event


note right of User: 1. The user initiates the ticket purchase.
User ->> TicketSystem : buyTicket(userEmail: String, eventId: String, ticketType: String)

activate TicketSystem
note right of TicketSystem: 2. The system forwards the request to the TicketService.
    TicketSystem ->> TicketService : buyTicket(userEmail: String, eventId: String, ticketType: String)
    activate TicketService

note right of TicketService: 3. The service checks the availability of the tickets.
    TicketService ->> TicketInfo : checkAvailability(eventId: String, ticketType: String)
    activate TicketInfo
    TicketInfo --> TicketService : return availableTickets
    deactivate TicketInfo

alt availableTickets == 0
    note right of TicketService: Tickets are not available, return failure.
    TicketService -->> TicketSystem : return failure
end

deactivate TicketService

note right of User: 6. The system notifies the user of the result.
TicketSystem -->> User : purchaseResult
