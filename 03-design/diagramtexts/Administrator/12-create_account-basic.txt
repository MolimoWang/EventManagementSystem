title 12-create_account-basic
actor "Administrator" as admin
image data:image/png;base64,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 "Web Browser" as w
boundary "<link:_>newView : View " as nv

boundary "<link:_>DispatchServlet" as d
entity "<link:_>m: Model" as m
control "<link:_>AccountSystem" as ac


entity "<link:_>c : Customer" as c
entity "<link:_>a : Administrator" as ad
entity "<link:_>o : Organizer" as o

participant "<link:_>CustomerRepository" as cr
participant "<link:_>AdminRepository" as ar
participant "<link:_>OrganizerRepository" as or
participant "<link:_>AccountService" as as
boundary "View" as nv

== 1.The administrator navigates to the 'View All Accounts' page, which displaying all existing accounts in the system.\n 2.The system displays three different types of user lists based on the administrator's selection at "view all accounts page".(07-view_all_accounts_administrators.png)(07-view_all_accounts_customers.png)(07-view_all_accounts_organisers.png) ==
admin -> w: click()
activate w

w -> d: POST(url: String, data: JSON)
activate d

d -> ac: registerAccount(email: String, name: String, password: String, m: Model)
activate ac

== 3. The administrator selects 'New Account'. ==
alt Customer
ac -> as: createCustomerAccount(email, name, role)
activate as
as -> cr: null := findByEmail(email)
as -> *c: Customer(name : String, email : String, password : String)
activate c
c--> as:return c
deactivate c
as -> cr: save(new Customer(email, name, role))
as --> ac: return Error.NONE
deactivate as

ac -> as: account := getCustomers()
activate as
as -> cr: a := findByEmail(email)
as --> ac: return a
deactivate as

ac -> m: addAttribute("allcustomer":String,allcustomer.Customer[*])
ac --> d:return "view_all_accounts_customer"
deactivate ac

end

alt Administrator
ac -> as: createAdminAccount(email, name, role)
activate as
as -> ar: null := findByEmail(email)
as -> *ad: Administrator(name : String, email : String, password : String)
activate ad
ad--> as:return a
deactivate ad
as -> ar: save(new Administrator(email, name, role))
as --> ac: return Error.NONE
deactivate as

ac -> as: account := getAdministrators()
activate as
as -> ar: a := findByEmail(email)

as --> ac: return a
deactivate as

ac -> m: addAttribute("alladministrator":String,alladministrator.Administrator[*])
ac --> d:return "view_all_accounts_administrator"

end

alt Organizer
ac -> as: createOrganizerAccount(email, name, role)
activate as
as -> or: null := findByEmail(email)
as -> *o: Organizer(name : String, email : String, password : String, address: String, companyName: String, phoneNumber: String)
activate o
o--> as:return a
deactivate o
as -> or: save(new Organizer(email, name, role))
as --> ac: return Error.NONE
deactivate as

ac -> as: account := getOrganizers()
activate as
as -> or: a := findByEmail(email)

as --> ac: return a
deactivate as

ac -> m: addAttribute("allorganizer":String,allorganizer.Organizer[*])
ac --> d: return "view_all_accounts_organizer"

end

== 4.The system display the "view all accounts" page with a new account.(07-view_all_accounts_administrators.png) ==
d -> *nv: View(model: Model)
activate nv

nv --> d:
deactivate nv

d --> w: return newView
deactivate d
