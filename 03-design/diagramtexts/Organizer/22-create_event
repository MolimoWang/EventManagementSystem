title Organizer Create Event

actor Organizer
image data:image/png;base64,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 "Web Browser" as v
boundary "<link:_>: new Event: Event" as ne
boundary "<link:_>: DispatchServlet" as DispatchServlet
control "<link:_>: EventSystem" as ec


participant "<link:_>: VenueService" as VenueService
participant "<link:_>: EventService" as es
entity "<link:_>: Venue" as Venue
participant "<link:_>: AccountService" as AccountService
entity "<link:_>: TicketAvailabilities" as ta
entity "<link:_>:TicketQuantity" as tq
entity "<link:_>: Event" as Event
entity "<link:_>: TicketInfo" as TicketInfo
==1. The organizer logs on and clicks 'event' button to list current events\n2. The organizer selects the "+" option from the list my events page (18-list_my_events.png)==


note over DispatchServlet:This part of the functionality is completed in Javascript\nIt does not need to be shown here
==3. The system turns to create event page (19-create_event.png) which displays a form to enter event details==


Organizer ->> v:interact
activate v

v->>DispatchServlet:POST(url: String, payload: json)
activate DispatchServlet
note over DispatchServlet:The DispatchServlet will convert the information from the\nposted from into a EventDTO object because of the thymeleaf\nannotations added to the HTML files

loop for every venue
DispatchServlet->> ec: listAvailableVenues(date, time)
activate ec
ec->>VenueService:getAvailableVenues(date, time)
activate VenueService

VenueService--> ec: return Venues[*]
deactivate VenueService

    ec->ec:displayAvailableVenuesPage(availableVenues)
    ec --> DispatchServlet :
deactivate ec
end
DispatchServlet-->v:return availableVenuePages

==4. The organizer creates new events with multiple variables, including:\n·Event Name\n·Date and Time\n·Venue\n·Description\n·Ticket Prices\n·Ticket Types\n·OrganizerEmail==
DispatchServlet ->> ec :createEvent(eventDetails)


activate ec
ec ->> es: createEvent(name, description, date, time, organizerEmail, venue, ticketTypes, ticketPrices): Boolean

activate es

    es ->> es : venue: getVenue(venue: Venue)
es->>AccountService: organizer: =getOrganizerAccount(organizerEmail)
es ->> Venue:getTicketAvailabilities()

loop for every ticket type
  es->ta:getTicketTypeName()
  es->ta:getNumberAvailable()
es->*tq:TicketQuantity(typeName, numAvailable, price)
end


 es ->> *Event :Event(name, description,date,time,venue, ticketQuantity)
    activate Event
    Event -->es:return e
    deactivate Event


==4. The organizer fills in the required details and clicks "Submit".==
    es ->>es:saveEvent(e)
    activate es
    es --> es:
    deactivate es

 es --> ec :return Error.NONE
    deactivate es

    ec->es:event := getEvent(eventName, eventDate)

    ec->ec:addAttribute("events":String, events:Event[*])

ec --> DispatchServlet: return"organizer_dashboard.html"(main page)
deactivate ec

DispatchServlet -> *ne:
activate ne
ne --> DispatchServlet:
deactivate ne
DispatchServlet --> v:return newEvent
deactivate DispatchServlet

==5. The system updates the list of nupcoming events and\nreturn to the list my events page (18-list_my_events.png).==

